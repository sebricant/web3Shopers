<section class="pt-150 pb-150">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 m-auto">
                <div class="row">
                    <div class="col-lg-5 m-auto">
                    <div class="login_wrap widget-taber-content p-30 background-white border-radius-10 mb-md-5 mb-lg-0 mb-sm-5">
                        <div class="padding_eight_all bg-white">
                            <div class="heading_s1">
                                <h3 class="mb-30">Login</h3>
                                <p class="m-auto" id="loginErr" style="color: red;"></p>
                                
                            </div>
                            <form >
                                <div class="form-group">
                                    <p class="text-danger"></p>
                                    <input type="text" required="" id="emailSignin" value="bichu@gmail.com"  name="email" placeholder="Your Email">
                                </div>
                                <div class="form-group">
                                    <p class="text-danger"></p>
                                    <input required="" type="password" value="Bichu12345" id="passwordSignin" name="password" placeholder="Password">
                                </div>
                                <div class="login_footer form-group">
                                    <div class="chek-form">
                                        <div class="custome-checkbox">
                                            <input class="form-check-input" type="checkbox" name="checkbox" id="exampleCheckbox1" value="">
                                            <label class="form-check-label" for="exampleCheckbox1"><span>Remember me</span></label>
                                        </div>
                                    </div>
                                    <a class="text-muted" type="button" href="/loginWithOTP">Login With OTP</a>
                                </div>
                                <div class="form-group">
                                    <button type="button" onclick="validator()" class="btn btn-fill-out btn-block hover-up">Log in</button>
                                </div>
                            </form>
                        </div>
                        <a class="text-info text-end" type="button" href="/signup">Create a new account</a>
                        
                    </div>
                </div>
            </section>


            
<script>
    function validator(){

    const emailSignin = document.getElementById('emailSignin')
    const passwordSignin = document.getElementById('passwordSignin')

    const emailValue1 = emailSignin.value.trim()
    const passwordValue1 = passwordSignin.value.trim()

    const error1_1 = emailSignin.parentElement.querySelector('p')
    const error2_2 = passwordSignin.parentElement.querySelector('p')

    error1_1.innerText=""
    error2_2.innerText=""

    let flag = 1

    if(emailValue1 == ""){
        error1_1.innerText = "This field is required"
        flag=2
    }
    else if(!emailValue1.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){
        error1_1.innerText = "Invalid Email"
        flag=2
    }
  

    if(passwordValue1 == ""){
        error2_2.innerText = "This field is required"
        flag=2
    }
   
    
    if(flag==1){
        sumbitSignin(emailValue1,passwordValue1)
    }
}



    function sumbitSignin(email1,password1){
        fetch('/login',{
            method:'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body:JSON.stringify({
                email:email1,
                password:password1
            })
        })
        .then((res)=>res.json())
        .then(res=>{
            console.log(res);
            if(res.status==true){
                console.log('huhu');
                
                window.location.href = '/shop'
            }
            else{
               console.log("dfghjk");
            //    document.getElementById('')
               loginErr.innerText="Invalid User Credentials"
            }
        })
    }



</script>